---
title: "Vue3 Pinia"
excerpt: "Pinia:: Vue3 공식 상태관리패턴 라이브러리"

categories:
  - Vue
tags:
  - [vue, vue3, pinia]

permalink: /categories/vue/pinia/

toc: true
toc_sticky: true

date: 2023-07-14
last_modified_at: 2023-07-14
---

## 상태관리패턴?

복잡한 계층 구조의 컴포넌트들 사이에서 데이터를 공유해야할 때 props, emit 등을 사용하게되면 props drilling 문제나 유지보수에 있어 어려움이 발생하게 된다.<br>
이러한 데이터들을 공유하면서 간단한 데이터 흐름을 유지하기 위해 reactivity api를 사용하여 반응형 객체를 만든 후 여러 컴포넌트에서 import해서 사용하거나 pinia라는 상태 관리 시스템을 이용할 수 있다.<br>
간단한 애플리케이션의 경우 reactivity api를 통해 수동으로 상태 관리 시스템을 만들 수도 있지만, 대규모 애플리케이션에서는 유지관리를 위해 Pinia라는 상태 관리 라이브러리를 사용하는 것이 권장된다.

***

## Pinia?

현재 Vue의 공식 상태관리 라이브러리로 컴포넌트/페이지 간에 상태를 공유할 수 있다.<br>
이전 Vuex와 비교하여 더 간단한 API를 제공하고 Composition API 스타일의 API를 제공하며, Typescript와 함께 사용할 때 견고한 타입 추론을 지원한다.

***

### ✅ Pinia의 장점

- Devtools 지원
-- actions를 추적하는 타임라인
-- Store는 사용되는 컴포넌트에 표시됨
-- Time travel과 더 쉬운 디버깅
- Hot module replacement
-- 페이지 리로드 없이 store 수정
-- 개발하는 동안 기존 state 유지
- Plugin : 플러그인으로 Pinia 기능 확장
- JS 사용자를 위한 적절한 Typescript 지원
- 서버 사이드 렌더링 지원

> Store란?<br>
Store는 컴포넌트에 포함되지 않은 state 및 비즈니스 로직을 보유하고 있는 엔터티이다. 
즉, 언제 어디서든 사용 가능한 전역 컴포넌트 같은 개념이다.<br>
<span style="background-color: #F7DDBE; font-weight: bold">state</span>,
<span style="background-color: #F7DDBE; font-weight: bold">getter</span>,
<span style="background-color: #F7DDBE; font-weight: bold">action</span>  3가지 개념이 있으며 이러한 개념이 data, computed, methods와 동일하다<br>
Store에는 애플리케이션 전체에 접근할 수 있는 데이터가 포함되어야한다. 예를 들어 네비게이션바에 표시되는 사용자 정보와 같은 경우.

#### Pinia 설치법

aaa

***

#### Pinia 사용하기

##### Store 정의

{% raw %}

```javascript
import { defineStore } from 'pinia'

// use00Store라고 짓는 것이 관례
export const useTestStore = defineStore('스토어 고유ID', {
  // 다른 옵션
})
```

{% endraw %}

- 스토어 고유ID는 필수이며 Pinia에서 Store를 devtools에 연결하는데 사용된다.

***

##### Store 사용하기

{% raw %}

```javascript
import { useUserStore } from '@/stores/user'

export default {
  setup () {
    const store = useUserStore()

    return {
      // 템플릿에서 사용하기 전에 전체 스토어 인스턴스를 반환할 수 있다.
      store
    }
  }
}
```

{% endraw %}

- store는 reactive로 래핑된 객체이다. 따라서 .value로 값을 가져올 필요는 없으나 구조분해할당은 안된다.
> storeToRefs()<br>
반응성을 유지하면서 Store에서 속성을 추출하기 위해 사용한다.<br>
구조분해할당해서 사용할 수 있다.
